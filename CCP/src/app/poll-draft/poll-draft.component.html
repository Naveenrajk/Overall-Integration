<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
 
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
  integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
 


  <div class="container-fluid">
    <div class="row">
        <div class="col-sm-auto sticky-top " style="background-color: #27235c;">
            <div class="d-flex flex-sm-column flex-row flex-nowrap align-items-center sticky-top"
                style="background-color: #27235C;">
                <ul class="nav nav-pills nav-click nav-flush flex-sm-column flex-row flex-nowrap mb-auto mx-auto text-center justify-content-between w-100 align-items-center"
                    style="background-color: #27235C">
                    <br>
                    <a routerLink="/poll" class="nav-link " title="" data-bs-toggle="tooltip" data-bs-placement="right"
                        data-bs-original-title="Dashboard">
                        <img src="assets/relevantz-logo.png" style="width: 35px;">
                        <p style="color: white;font-size: smaller;">POLL</p>
                    </a>

                    <li routerLink="/create">
                        <a class="nav-link " title="" data-bs-toggle="tooltip" data-bs-placement="right"
                            data-bs-original-title="Dashboard">
                            <i class="fa fa-plus icon" style="font-size: 20px;"></i>
                            <p style="color: white;font-size: smaller;">Create</p>
                        </a>
                    </li>
                    <li routerLink="/polldept">
                      <a class="nav-link  px-2" title="" data-bs-toggle="tooltip" data-bs-placement="right"
                        data-bs-original-title="Orders">
                        <i class="fa fa-chain " style="font-size: 20px;color: white;"></i>
          
                        <p style="color: white;font-size: smaller;">Depart</p>
                      </a>
                    </li>

                    <li routerLink="/draft">
                        <a class="nav-link  px-2" title="" data-bs-toggle="tooltip" data-bs-placement="right"
                            data-bs-original-title="Orders">

                            <i class="fa fa-newspaper-o icon" style="font-size: 20px;"></i>
                            <p style="color: white;font-size: smaller;">Draft</p>
                        </a>
                    </li>


                    <li routerLink="/viewEmployee">
                        <a class="nav-link  px-2" title="" data-bs-toggle="tooltip" data-bs-placement="right"
                            data-bs-original-title="Orders">

                            <i class="fa fa-users icon" style="font-size: 20px;"></i>
                            <p style="color: white;font-size: smaller;">Employee</p>
                        </a>
                    </li>

                    <li><br>
                        <br>
                    </li>
                    <li routerLink="/User">
                        <a class="nav-link  px-2" title="" data-bs-toggle="tooltip" data-bs-placement="right"
                            data-bs-original-title="Orders">

                            <i class="fa fa-home icon" style="font-size: 20px;"></i>
                            <p style="color: white;font-size: smaller;">Home</p>
                        </a>
                    </li>
                    <br>

                </ul>
            </div>
        </div>
        <div class="col-sm p-3 min-vh-100">
          <div>
          <div *ngFor="let poll of polls;let i =index;">
            
            <div class="container">
              <div class="card">
                <div class="card">
                  
                  <div class="card-header">
        
                    <!-- &nbsp; {{poll.userFirstName}} has published a Poll in {{poll.regionName}} -->
      Draft {{i+1}}
           
                  </div>
                  <div class="card-body">
                    
                    <div class="card-content">
                      <div class="table-responsive">
                        <div class="td1">
                          <pre class="card-title" [innerHTML]="poll.pollQuestion"></pre>
                          
                          <hr>
                          <button class="btn btn-outline-danger m-2" style="float: right;" (click)=deleteDraft(poll.pollId)><i
                              class="fa far fa-trash"></i>
                            Delete</button>
                          <button class="btn btn-outline-primary m-2" style="float: right;" data-bs-toggle="modal"
                            (click)="getDraftById(poll.pollId, poll.pollQuestion,values)" data-bs-target="#exampleModal">
                            <i class="fa fa-edit"></i>
                            Edit</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
           
           
          <!-- <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="staticBackdropLabel" data-bs-backdrop="static"
            data-bs-keyboard="false" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
           
              <div class="modal-content">
                <div class="modal-header">
                  <h4 class="modal-title fs-5" id="exampleModalLabel">preview</h4>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                 
                    <pre [innerHTML]="pollData.pollQuestion" class="display-6"  formControlName="questionField"></pre>
           
                    <div *ngFor="let opt of OptionList">        
                      <p>{{opt.value}}</p>
                    </div>
                   
                   <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      <button type="button" class="btn btn-primary" (click)="sharePoll(pollData)"  data-bs-dismiss="modal">Share</button>
                    </div>
           
                </div>
           
              </div>
            </div>
           </div>


    </div>
  -->

  <div class="modal fade" id="exampleModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
  aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel"></h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <div class="container mt-4">
          <div class="card">
            <div class="card-header">
              Share Your Poll
            </div>
            <div class="card-body">
              <form class="example-form" [formGroup]="pollForm">
                <div>
                  <b>Poll Question</b>
                  <div class="form-group shadow-textarea">
                    <p-editor [style]="{ height: 'auto'}" formControlName="pollQuestion" [(ngModel)]="pollQuestion">
                      <ng-template pTemplate="header">
                        <span class="ql-formats">
                          <select class="ql-font"></select>
                          <select title="Font Size" class="ql-size"></select>
                        </span>
                        <span class="ql-formats">
                        </span>
                        <span class="ql-formats">
                          <button type="button" class="ql-bold" aria-label="Bold"></button>
                          <button type="button" class="ql-italic" aria-label="Italic"></button>
                          <button type="button" class="ql-underline" aria-label="Underline"></button>
                          <button type="button" class="ql-strike" aria-label="strike"></button>
                        </span>
                        <span class="ql-formats">
                          <select class="ql-align"></select>
                          <button type="button" class="ql-clean" aria-label="clean"></button>
                          <button type="button" class="ql-image" aria-label="Image"></button>
                        </span>
                      </ng-template>
                    </p-editor>
                  </div>
                </div>
                <hr>
                <div >
                  <div class="form-group"  >
                    <div class="form-check">
                      <div class="row">
                        <tr class="w-100 form-check">
                          <div class="field">
                            <i class="fa fa-grip-lines-vertical"></i>
                                  <tr class="w-100 form-check">
                                    
                                      <div *ngFor="let value of values; let i = index" [formGroup]="valueFormGroup(i)">

                                        <b>Poll Option</b>
                                        <input type="text" class="form-control mb-1 w-50 mt-2" formControlName="value" [(ngModel)]="values[i].value"placeholder="Your option">
                                      </div>
                                      <!-- <div class="form-row org-desc-parent-margin ml-4" style="float:right">
                                        <button class="border border-primary text-primary cursor-pointer bg-white" (click)="addOption()"
                                          id="addbutton">
                                          + Add Option
                                        </button>
                            
                                      </div> -->
                                  </tr>
                          
                          </div>

                          <!-- <div formArrayName="options">
                            <div class="form-group" [formGroupName]="i"
                              *ngFor="let group of optionArray.controls.slice(0,10); let i = index">
                              <div class="form-check">
                                <div class="row">
                                  <tr class="w-100 form-check"><b>Poll Option</b>
                                    <div class="field">
                                      <i class="fa fa-grip-lines-vertical"></i>
                
                                      <input type="text" class="form-control mb-1 w-50 mt-2" placeholder="Your option" value=""
                                        formControlName="value" />
                                      <i *ngIf="i > 1" id="delete" (click)="removeOption(i)" type="btn"
                                        style="color: #ff0000;font-size: 20px;" class="fa fa-trash-o m-2 mt-3">
                                      </i>
                
                                    </div>
                                   
                                  </tr>
                              
                                </div>
                              </div>
                
                            </div>
                
                          </div>
                          <div class="form-row org-desc-parent-margin ml-4" style="float:right">
                            <button class="border border-primary text-primary cursor-pointer bg-white" (click)="addOption()"
                              id="addbutton">
                              + Add Option
                            </button>
                          </div> -->
                        </tr>
                      </div>
                    </div>
                  </div>
      
                </div>

              </form>
            </div>
          </div>
        </div>


      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"  (click)="refreshPage()">Close</button>
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" (click)="sharePoll(pollValue, pollQuestion,values)" 
         (click)="refreshPage()" >Share as poll</button>

         <!-- (click)="updatePoll(pollValue,pollQuestion,values)" -->
      </div>
    </div>
  </div>
</div>
